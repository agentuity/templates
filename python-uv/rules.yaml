# yaml-language-server: $schema=https://raw.githubusercontent.com/agentuity/templates/main/rules.schema.json
identifier: python-uv
language: python
runtime: uv
src_dir: agents
filename: agent.py
bundle:
  enabled: true
  ignore:
    - "**/__pycache__/**"
development:
  port: 3500
  watch:
    enabled: true
    files:
      - "agents/**"
  command: uv
  args:
    - run
    - --env-file
    - .env
    - server.py
  environment:
    # Disable conflicting OpenTelemetry instrumentation from LangChain
    TRACELOOP_TRACE_CONTENT: "false"
    OTEL_PYTHON_DISABLED_INSTRUMENTATIONS: "langchain,openai"
deployment:
  resources:
    memory: 250Mi
    cpu: 500M
  command: uv
  args:
    - run
    - server.py
  environment:
    # Disable conflicting OpenTelemetry instrumentation from LangChain
    TRACELOOP_TRACE_CONTENT: "false"
    OTEL_PYTHON_DISABLED_INSTRUMENTATIONS: "langchain,openai"
new_agent:
  steps:
    - action: create_file
      filename: "agents/{{ .Name | safe_filename }}/agent.py"
      from: "common/py/agent.py"
new_project:
  steps:
    - command: uv
      args:
        - venv
        - --python
        - ">=3.10,<=3.12"
    - command: uv
      args:
        - init
        - --name
        - "{{ .Name | safe_filename }}"
        - --no-package
        - --python
        - ">=3.10,<=3.12"
        - --description
        - "{{ .Description }}"
        - --no-readme
        - --quiet
        - --no-workspace
        - --app
    - command: uv
      args:
        - add
        - --quiet
        - agentuity
    - action: delete_file
      files:
        - "hello.py"
    - action: copy_dir
      from: "common/cursor"
      to: ".cursor/rules"
      filter: "*.mdc"
    - action: copy_dir
      from: "common/py/cursor"
      to: ".cursor/rules"
      filter: "*.mdc"
    - action: create_file
      filename: "server.py"
      from: "common/py/boot.py"
    - action: create_file
      filename: ".gitignore"
      from: "common/py/gitignore"
    - action: create_file
      filename: "README.md"
      from: "common/py/python-uv-readme.md"
    - action: create_file
      filename: ".editorconfig"
      template: "common/editorconfig"
    - action: create_file
      filename: "agents/__init__.py"
      template: "common/py/init.py"
